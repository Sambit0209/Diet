<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shared Daily Checklist</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <style>
    body { font-family: sans-serif; background: #f2f2f2; padding: 20px; max-width: 700px; margin: auto; }
    h1 { text-align: center; }
    .section { background: #fff; padding: 15px; margin: 10px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .section h2 { font-size: 1.2em; }
    label { display: block; margin: 5px 0; }
    .timestamp { font-size: 0.9em; color: #888; margin-top: 5px; }
  </style>
</head>
<body>
  <h1>Shared Daily Checklist</h1>
  <div id="checklist"></div>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD-EXAMPLE1234567890abcdefg",
      authDomain: "shared-checklist-demo.firebaseapp.com",
      databaseURL: "https://shared-checklist-demo-default-rtdb.firebaseio.com",
      projectId: "shared-checklist-demo",
      storageBucket: "shared-checklist-demo.appspot.com",
      messagingSenderId: "1234567890",
      appId: "1:1234567890:web:abcdef123456"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const checklistRef = db.ref("sharedChecklist");

    const data = {
      "Morning Routine (7:15 – 8:15 AM)": [
        "Lukewarm water + almonds",
        "Cobra Pose",
        "High jumps",
        "Banana shake + Eggs"
      ],
      "Lunch (1:00 – 1:30 PM)": [
        "Chapati + Dal",
        "Salad + Buttermilk"
      ],
      "Evening (5:30 – 6:00 PM)": [
        "Peanuts/Makhana",
        "Milk/Protein Shake"
      ],
      "Night (9:30 PM – 12:00 AM)": [
        "Dinner + Sabzi",
        "Ashwagandha milk"
      ]
    };

    const checklistDiv = document.getElementById("checklist");

    for (let section in data) {
      const container = document.createElement("div");
      container.className = "section";
      const title = document.createElement("h2");
      title.textContent = section;
      container.appendChild(title);

      data[section].forEach((item, index) => {
        const label = document.createElement("label");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        const key = section + "-" + index;

        const timestamp = document.createElement("div");
        timestamp.className = "timestamp";

        // Load initial state from Firebase
        checklistRef.child(key).on("value", snapshot => {
          const val = snapshot.val();
          checkbox.checked = val?.checked === true;
          timestamp.textContent = val?.time ? `Last updated: ${val.time}` : "";
        });

        // Update Firebase on change
        checkbox.addEventListener("change", () => {
          const now = new Date().toLocaleString();
          checklistRef.child(key).set({ checked: checkbox.checked, time: now });
        });

        label.appendChild(checkbox);
        label.append(" " + item);
        container.appendChild(label);
        container.appendChild(timestamp);
      });
      checklistDiv.appendChild(container);
    }
  </script></body>
</html>
